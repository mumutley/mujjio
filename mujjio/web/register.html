
<script type="text/javascript">
  
  $("#birthday_day").focus(function() {
    if( this.value == this.defaultValue ) {
      this.value = "";
    }
  }).blur(function() {
    if( !this.value.length ) {
      this.value = this.defaultValue;
    }
  });
  
  $("#birthday_month").focus(function() {
    if( this.value == this.defaultValue ) {
      this.value = "";
    }
  }).blur(function() {
    if( !this.value.length ) {
      this.value = this.defaultValue;
    }
  });
  
  $("#birthday_year").focus(function() {
    if( this.value == this.defaultValue ) {
      this.value = "";
    }
  }).blur(function() {
    if( !this.value.length ) {
      this.value = this.defaultValue;
    }
  });
  
</script>

<script type="text/javascript">
      
  $(function() {
        
    $("#muj-container-login-form").corner("round 10px");

    function loadRegistration() {
    
      $("#muj-container-login-promo").hide();

      $("#muj-container-login-form").animate({
        width: 960,
        height: 500
      }, 500 );
      
      $("#muj-container-login-form").html("").load("register.html");
    }

    $("A#muj-link-register").click((function(){
      loadRegistration();
    }));
  });

</script>

<script type="text/javascript"> 
       
  $.validator.setDefaults({
    //if form validates contstuct JSON
    submitHandler: function() {
      $.post("http://localhost:8084/social/rest/signup", $("#muj-form-signup").serialize());          
      alert(JSON.stringify($('#muj-form-signup').serializeObject()));
      return false;   
    }      
  });
  
  // this one requires the value to be the same as the first parameter
  $.validator.methods.equal = function(value, param) {
    return value == param;
  };
	
  $().ready(function() {

    var validator = $("#muj-form-signup").bind("invalid-form.validate", function() {
      $("#summary").html("Oops! We have " + validator.numberOfInvalids() + " fields to fix");
    }).validate({
      debug: true,
      errorElement: "muj-form-460-error-holder",
      errorContainer: $("#muj-form-460-warning"),
      errorPlacement: function(error, element) {
        error.appendTo( element.parent("div").next("div") );
      },
      success: function(label) {
        label.text("Ok -Thank You").addClass("success");
      },
      rules: {
        
        givenName: {
          required: true
        },
            
        familyName: {
          required: true
        },
        
        email: {
          required: true,
          email: true,
          remote : "/social/rest/validator/email"
        },
        
        confirm_email: {
          required: true,
          email: true,
          equalTo: "#email"
        },
        
        password: {
          required: true,
          minlength: 5
        },
        
        gender: {
          required: true
        },
        
        language: {
          required: true
        },
           
         birthday_year: {
          required: true
        }       
      },
      messages: {
         email: { 
             remote: "already subscribed",
             email : "A valid email address is required",
             required : "please enter an email"
         }
      }
      
    });
		
  });
      
  //construct JSON
  $.fn.serializeObject = function()
  {
    var o = {};
    var a = this.serializeArray();
    $.each(a, function() {
      if (o[this.name] !== undefined) {
        if (!o[this.name].push) {
          o[this.name] = [o[this.name]];
        }
        o[this.name].push(this.value || '');
      } else {
        o[this.name] = this.value || '';
      }
    });
    return o;
  };
</script>

<div id="muj-container-register-form">

  <div class="muj-container-register-form-header">Sign Up</div>

  <form method="post" id="muj-form-signup" method="post" action="#"> 

    <div id="muj-container-register-left" class="muj-container-width-480">

      <div class="muj-form-label-large" style="width:440px" ><label for="givenName">First Name</label></div> 

      <div style="width:440px;height:35px">
        <div class="muj-form-input-large"><input id="givenName" name="givenName" type="text" title="First name is required" /></div> 
        <div class="muj-form-460-error-back"></div> 
      </div> 

      <div class="muj-form-label-large" style="width:440px; margin-top: 30px" ><label for="familyName">Last Name</label></div> 

      <div style="width:440px;height:35px">
        <div class="muj-form-input-large"><input id="familyName" name="familyName" type="text" title="Last name is required" /></div> 
        <div class="muj-form-460-error-back"></div> 
      </div> 

      <div class="muj-form-label-large" style="width:440px; margin-top: 30px" ><label for="email">Email Address</label></div> 

      <div style="width:440px;height:35px">
        <div class="muj-form-input-large"><input id="email" name="email" title="A valid email address is required" /></div> 
        <div class="muj-form-460-error-back"></div> 
      </div> 

      <div class="muj-form-label-large" style="width:440px; margin-top: 30px" ><label for="confirm_email">Confirm Email Address</label></div> 

      <div style="width:440px;height:35px">
        <div class="muj-form-input-large"><input id="confirm_email" name="confirm_email" title="Email adresses must match" /></div> 
        <div class="muj-form-460-error-back"></div> 
      </div> 

    </div>

    <div id="muj-container-register-right" class="muj-container-width-480">

      <div class="muj-form-label-large" style="width:440px;"><label for="password">Set Your Password</label></div> 

      <div style="width:440px;height:35px">
        <div class="muj-form-input-large"><input id="password" name="password" type="password" title="Minimum is 5 characters" /></div> 
        <div  class="muj-form-460-error-back"></div> 
      </div> 


      <div class="muj-form-label-large" style="width:440px; margin-top: 30px" ><label for="birthday_day">Birthday</label></div>

      <div style="width:440px;height:35px">
        <div class="muj-form-input-date-large"><input id="birthday_day" name="birthday_day" title="" value="dd" /></div> 
        <div class="muj-form-input-date-large"><input id="birthday_month" name="birthday_month" title="" value="mm"  /></div> 
        <div class="muj-form-input-date-large"><input id="birthday_year" name="birthday_year" title=""  value="yyyy" maxlength="4"  /></div> 
       
        <div class="muj-form-460-error-back" style="margin: 2px 0 0 40px;"></div> 
        <div style="width:460px; margin-top:5px; float:left"><input type="checkbox" id="birthday_noyear" style="vertical-align: middle; float: left" /><div style=" color:#dddddd; float:left; margin: 2px 0 0 5px;">Don't show the year on my profile</div></div>

      </div> 

      <div class="muj-form-label-large" style="width:460px; margin-top: 9px;"><label for="gender">I Am</label></div>
      <div id="muj-form-register-gender-select">

        <select id="gender" class="muj-form-select-large" name="gender" id="gender"><option value="f">Female</option><option value="m">Male</option></select>

      </div>
      <div class="muj-form-460-error-back" style="margin: -1px 0 0 17px;"></div>


      <div class="muj-form-label-large" style="width:460px; margin-top: 30px;"><label for="language">Language</label></div>
      <div id="muj-form-register-gender-select">

        <select id="language" class="muj-form-select-large" name="language" id="language"><option value="English">English</option><option value="Spanish">Spanish</option><option value="French">French</option></select>

      </div>
      <div class="muj-form-460-error-back" style="margin: -1px 0 0 17px;"></div>
      
      <div style="width:440px; margin-top: 30px;float: left"><input type="submit" value="Sign Up" class="grey-button"/> </div>
      
    </div>
    
    <div style="width:460px;float: left;position:relative; top:-5px; left: 500px"><h4 id="summary" style="font-size:12px; color:#ddd"></h4> </div>

  </form> 


</div>